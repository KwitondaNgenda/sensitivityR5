<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="David Ngendahimana" />

<meta name="date" content="2018-10-16" />

<title>Designing an Observational Study - Selection of a matching algorithm, assessment of Rubin balance recommendations &amp; sensitivity analysis</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Designing an Observational Study - Selection of a matching algorithm, assessment of Rubin balance recommendations &amp; sensitivity analysis</h1>
<h4 class="author"><em>David Ngendahimana</em></h4>
<h4 class="date"><em>2018-10-16</em></h4>



<div id="introduction." class="section level2">
<h2>Introduction.</h2>
<p>Over the past few decades, technology has made it easier for researchers to access variety of observational data. Such data include information collected from patient medical records, national surveys et al. Availability of this data provides opportunities for exploring important research questions, however to do so one has be careful in designing studies based on these data. A common use of observation study is in estimating treatment effect. This typically involves defining a variable to measured exposure and then using it to identify a treatment and control group. Since the gold standard for estimating a treatment effect is to use data collected from a randomized clinical trial, observational data has to be preprocessed using observational study design algorithms to ensure data used to make treatment effect is as similar as possible to data that would have been obtained from a clinical trial.</p>
<p>One of the assumptions made when estimating treatment effect from observational studies is what is called the the ignorabiltiy assumption,that is, only the observed covariates are sufficient to explain any meaningful differences between the treatment and control groups. The consequence of this assumption is that if the groups being compared are similar on average, on these observed covariates , then any differences in the outcome being studied is due to treatment- the only distinguishing factor between the groups being compared. The design phase of an observational study is usually focused on achieving the best possible balance of observed covariates between the treated and control group. Several design algorithms have been proposed and R packages that implement them are widely available. In his 2008 paper , Stuart et al provides a detailed description of the major design algorithms and R packages that implement them.</p>
<p>When designing an observation study, its recommended that one try different matching algorithms (i.e.solutions) and pick one that gives the best balance. With various matching algorithms housed in different R packages , for sometime , it was hard to compare across design methods. To easy this process, Greifer et al developed the <code>cobalt</code> package that interacts seamlessly with objects from <code>Matching</code> and <code>MacthIt</code> packages and generate key balance summary statistics. However, it is often not trivial to identity the a matching algorthm to use especially when more than one of those algorithm differ marginally on key balance statistics.</p>
<p>The main critique of observational studies that use matched sampling design methods is that treatment effect estimates obtained are premised on the assumption that observed variables are sufficient to explain the differences between treated and control group. To deal with this criticism , Rosenbaum developed a sensitivity analysis framework that , if a significant treatment effect exists, computes a parameter to quantify a bias magnitude due to unmeasured confounders that would be required to nullify significant results. Presenting results of these sensitivity analysis allows the reader to make an informed decision on how much faith to place in your findings. A significant portion of sensitivity methods developed by Rosenbaum has been implemented in the <code>rbounds</code>package (Keele,2008). However <code>rbounds</code> functions only interact with objects from the <code>Matching</code> package. The package does not also implement a sensitivity analysis method for time to event outcomes. To perform sensitivity analysis involving matched sets, Rosenbaum developed two packages <code>sensitivitymv</code> and <code>sensitivitymw</code>(Rosenbaum,2013). These two packages also provide more robust test statistic that increase the power of sensitivity. However, to perform sensitivity analysis using these packages require reshaping your data set to conform to a certain format.</p>
</div>
<div id="why-use-this-package" class="section level2">
<h2>Why use this package ?</h2>
<div id="select-a-matched-sampling-design-most-robust-to-unmeasured-selection-bias-from-a-set-of-competitive-designs." class="section level3">
<h3>Select a matched sampling design most robust to unmeasured selection bias from a set of competitive designs.</h3>
<p>Recent advancements in computer technology has led to new matched sampling algorithms currently implemented in R. Among the most recent include cardinality and genetic matching. Others that interact with our package such as optimal and nearest neighbor matching are commonly used. When used to to produced matched samples for the same study, the quality of matches produced by each of this algorithms differ primarirly due to the fact that when forming matches each of this algorithms seeks to optimize different objective functions. This difference in quality of matches produced impacts the design of a study in terms of its overall robustness to unmeasured selection bais. Specifically, designs produced by these algorithms differ in terms of their robustness to hidden bias.The workhorse function of this package automates a selection strategy to guide selection of the most robust design from a set of designs based on various competitive algorithms.</p>
</div>
<div id="easy-sensitivity-analyisis-when-matched-sampling-is-not-necessary-done-with-matching-package." class="section level3">
<h3>Easy sensitivity analyisis when matched sampling is not necessary done with <code>Matching</code> package.</h3>
<p>Although there are several R packages that implement different matched sampling algorithms, there is no packages that interacts universally with these matching package to implement sensitivity to hidden bias analysis. Currently to perform sensitivity analysis to hidden bias using objects from some matching packages such <code>MatchiIt</code> or <code>designmatch</code> can be time consuming and complicated depending on ones confort with R programming. The <code>rbounds</code> package which is commonly used to perfom sensitivity analysis currently accepts objects from <code>Matching</code> package only. This package gives the user the freedom to perform sensitivity analysis using output from any matching package by simply passing the object to a dedicated function of this package.</p>
</div>
<div id="sensitivity-analysis-for-matched-sets-from-any-package." class="section level3">
<h3>Sensitivity analysis for matched sets from any package.</h3>
<p>Unlike <code>rbounds</code> which implements sensitivity analysis for matched pairs only, this package contains functions which accept objects from various matching packages in case matched sets rather than matched pair are desirable for a given design. Specific functions in this package transforms and performs sensitivity analysis using these objects from different matching packages. Using this package can save time required to transform objects from matching packages into valid inputs for <code>sensitivitymv</code> or <code>sensitivitymw</code>, the two packages that perform sensitivity analysis for matched sets.</p>
</div>
<div id="balance-and-sensitivity-analysis-plots." class="section level3">
<h3>Balance and Sensitivity Analysis Plots.</h3>
<p>Most matching packages contain plots and tables useful in judging quality of matches obtained after matching, the most common being the love plot (Thomas Love). This package adds to these tools by providing sensitivity analysis plots(Rosenbaum ,2013) and plots to assess balance recommendations advocated by Rubin. These plots are meant to help visualize and interpret findings.</p>
</div>
</div>
<div id="using-the-package." class="section level2">
<h2>Using the package.</h2>
<p>This package contains four main functions, <code>ds_function</code> , <code>pens2()</code>, <code>binarysens2</code>, <code>t2event()</code>,<code>rubinrules()</code>. Other auxilliary functions in the package include <code>ampPlot()</code> and <code>eda()</code>. In the sections that follow , a detailed description of how each fucntion can be used is given. It is important to note that this package does not replace the highly sophisticated matching and sensitivity tools in the packages described above. What it seeks to accomplish is to bridge the most common matching packages to various sensitivity packages where such connections do not exist and would require more work on the part of the analyst. Currently this package is housed on github therefore to install it use the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="co">#&gt; Warning: package 'devtools' was built under R version 3.4.4</span>
devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;Ngendahimana/SensitivityR5&quot;</span>)</code></pre></div>
<div id="rubinrules" class="section level3">
<h3>rubinRules</h3>
<p><code>rubinRules()</code> is a function that can be use to evaluate the three balance meusures suggested by Rubin (2001) and are based on the theory published in another paper by Rubin and Thomas (2006). Rubin Provides three guidelines to ensure that the results of regression adjustment - often conducted in the analysis phase of observational studies to clear any residual imbalances - are valid. The three guidelines are:</p>
<ul>
<li>Rule 1: The absolute standardized difference of means of the propensity score should be less than 0.25.</li>
<li>Rule 2: The ratio of the variances of the propensity score in the treated and control groups should be between 0.5 and 2</li>
<li>Rule 3: For each covariate, the ratio of the variance of the residuals orthogonal to the propensity score in the treated and control groups should be between 0.5 and 2.</li>
</ul>
<p>An example of how to use the <code>rubinRules</code> function to assess these guidelines is illustrated below</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">library</span>(SensitivityR5)

<span class="kw">data</span>(<span class="st">&quot;toy&quot;</span>,<span class="dt">package =</span> <span class="st">&quot;SensitivityR5&quot;</span>)
psmodel &lt;-<span class="st"> </span><span class="kw">glm</span>(treated <span class="op">~</span><span class="st"> </span>covA <span class="op">+</span><span class="st"> </span>covB <span class="op">+</span><span class="st"> </span>covC <span class="op">+</span><span class="st"> </span>covD <span class="op">+</span><span class="st"> </span>covE <span class="op">+</span><span class="st"> </span>covF <span class="op">+</span><span class="st"> </span>Asqr <span class="op">+</span><span class="st"> </span>BC <span class="op">+</span><span class="st"> </span>BD, <span class="dt">family=</span><span class="kw">binomial</span>(), <span class="dt">data=</span>toy)
toy<span class="op">$</span>ps &lt;-<span class="st"> </span>psmodel<span class="op">$</span>fitted
toy<span class="op">$</span>linps &lt;-<span class="st"> </span>psmodel<span class="op">$</span>linear.predictors
covlist1=<span class="kw">c</span>(<span class="st">'covA'</span>, <span class="st">'covB'</span>, <span class="st">'covC'</span>, <span class="st">'covD'</span>, <span class="st">'covE'</span>, <span class="st">'covF.Middle'</span>, <span class="st">'covF.High'</span>, <span class="st">'Asqr'</span>,<span class="st">'BC'</span>, <span class="st">'BD'</span>)
k =<span class="kw">rubinRules2</span>(<span class="dt">data=</span>toy,<span class="dt">Treatment=</span><span class="st">'treated'</span>,<span class="dt">covlist=</span>covlist1)
k<span class="op">$</span>plot</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The first two Rubin balance meausures are displayed at the top of the plot while the third balance measure which consists of series of residual variance ratios for variable are displayed inside the dot plot. The blue lines indicate acceptable range for the residual variance ratios. Ratio outside region bounded by the red lines are considered unacceptable. This plot is a <code>ggplot</code> object and can be modified like any <code>ggplot</code> graph. For example to modify the plot title and background, the following code could be executed:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">k<span class="op">$</span>plot<span class="op">+</span><span class="kw">theme_bw</span>()<span class="op">+</span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Assessing Rubin (2010) Balance Measures&quot;</span>)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Various items can be called off of the list (k) using conventional R methods. For example to obtain a dataset of residual variance ratio , you can do the following.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">k<span class="op">$</span>RUBIN3
<span class="co">#&gt;        VarName Rubin3</span>
<span class="co">#&gt; 1         covA  0.547</span>
<span class="co">#&gt; 2         covB  1.073</span>
<span class="co">#&gt; 3         covC  1.027</span>
<span class="co">#&gt; 4         covD  1.140</span>
<span class="co">#&gt; 5         covE  0.568</span>
<span class="co">#&gt; 6  covF.Middle  1.007</span>
<span class="co">#&gt; 7    covF.High  1.276</span>
<span class="co">#&gt; 8         Asqr  0.649</span>
<span class="co">#&gt; 9           BC  1.145</span>
<span class="co">#&gt; 10          BD  1.106</span></code></pre></div>
</div>
<div id="love-plot" class="section level3">
<h3>Love Plot</h3>
<p>Although Love plot for assessing standardized balance measure for objects produced by <code>Matching</code> and <code>MatchIt</code> has already been implemented in <code>Cobalt</code> package through the Love.plot function, this function cannot interact with <code>designmatch</code> object directly. On the other hand the love plot object currently implemented in <code>designmatch</code> package is not a <code>ggplot</code> objects and therefore makes it hard to customize as desired. The Love plot function in this package allows you to generate ggplot Love figures using objects from any of the three matching packages including <code>designmatch</code> package.</p>
<p>The code chunk below shows how to accomplish this.</p>
<div id="using-designmatch-objects" class="section level4">
<h4>Using <code>designmatch</code> objects</h4>
<p>This example uses to design match which implements cardinality matching which balances variables directly rather than using a summary measure to quantify the distance between observations. This matching optimizes on the sample size rather than simply a distance measure like propensity score. <code>designmatching</code>package also enables other more sophisticated matching algorithms such as fine, near-fine balancing, exact matching and near exact matching. These algoritms can be appealing in various circumstances, especially when the researcher wishes to incorporate subject matter understanding of the question at hand.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">data</span>(<span class="st">&quot;lalonde&quot;</span>,<span class="dt">package =</span> <span class="st">&quot;designmatch&quot;</span>)
<span class="kw">attach</span>(lalonde)
## Treatment indicator
t_ind =lalonde<span class="op">$</span>treat

## Distance matrix
dist_mat =<span class="st"> </span><span class="ot">NULL</span>

## Subset matching weight.
subset_weight =<span class="st"> </span><span class="dv">1</span> 

<span class="co"># Moment balance: constrain differences in means to be at most .05 standard deviations apart</span>
mom_covs =<span class="st"> </span><span class="kw">cbind</span>(age, education, black, hispanic, married, nodegree, re74, re75)
mom_tols =<span class="st"> </span><span class="kw">round</span>(<span class="kw">absstddif</span>(mom_covs, t_ind, .<span class="dv">05</span>), <span class="dv">2</span>)
mom =<span class="st"> </span><span class="kw">list</span>(<span class="dt">covs =</span> mom_covs, <span class="dt">tols =</span> mom_tols)

## Fine balance
<span class="co">#fine_covs = cbind(black, hispan, married, nodegree)</span>
<span class="co">#fine = list(covs = fine_covs)</span>

## Exact matching
<span class="co">#exact_covs = cbind(black)</span>
<span class="co">#exact = list(covs = exact_covs)</span>

## Solver options
t_max =<span class="st"> </span><span class="dv">60</span><span class="op">*</span><span class="dv">5</span>
solver =<span class="st"> &quot;glpk&quot;</span>
approximate =<span class="st"> </span><span class="dv">1</span>
solver =<span class="st"> </span><span class="kw">list</span>(<span class="dt">name =</span> solver, <span class="dt">t_max =</span> t_max, <span class="dt">approximate =</span> approximate,<span class="dt">round_cplex =</span> <span class="dv">0</span>, <span class="dt">trace =</span> <span class="dv">0</span>)

## Cardinality matching
out =<span class="st"> </span><span class="kw">bmatch</span>(<span class="dt">t_ind =</span> t_ind, <span class="dt">dist_mat =</span> dist_mat, <span class="dt">subset_weight =</span> subset_weight, <span class="dt">mom =</span> mom,  <span class="dt">solver =</span> solver)
<span class="co">#&gt;   Building the matching problem... </span>
<span class="co">#&gt;   GLPK optimizer is open... </span>
<span class="co">#&gt;   Finding the optimal matches... </span>
<span class="co">#&gt;   Optimal matches found</span>

<span class="co"># Indices of the treated units and matched controls</span>
t_id =<span class="st"> </span>out<span class="op">$</span>t_id
c_id =<span class="st"> </span>out<span class="op">$</span>c_id
<span class="co">#detach(lalonde)</span></code></pre></div>
<p>To assess balance with <code>love_plot</code> function in this package after cardinality matching you would need to execute the following code</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p =<span class="st"> </span><span class="kw">love_plot</span>(<span class="dt">X =</span>out, <span class="dt">data =</span> lalonde , <span class="dt">covList=</span><span class="kw">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;education&quot;</span>, <span class="st">&quot;black&quot;</span>, <span class="st">&quot;hispanic&quot;</span>, <span class="st">&quot;married&quot;</span>, <span class="st">&quot;nodegree&quot;</span>, <span class="st">&quot;re74&quot;</span>, <span class="st">&quot;re75&quot;</span>))

p</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Note that <code>out</code> is an object from the <code>designmatch</code> package that implements cardinality matching.</p>
<p>unlike the existing love plot in <code>designmatch</code> which does not allow one to modify its appearence, this plot can be enhanced using <code>ggplot2</code> features. For example we can add desired standardized difference threshhold lines , say, from -0.1 to 0.1 and remove the legend title with the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p<span class="op">+</span><span class="kw">theme_bw</span>()<span class="op">+</span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="op">-</span><span class="fl">0.1</span>)<span class="op">+</span><span class="st"> </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="fl">0.1</span>) <span class="op">+</span><span class="kw">theme</span>(<span class="dt">legend.title =</span> <span class="kw">element_blank</span>())</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Object from <code>MatchIt</code> and <code>Matching</code> packages can also be directly used with the <code>love_plot</code> function. You can also use the love plot function to extrac other important balance measures. We illustrate this using optimal matching functionality within the <code>MatchiIt</code>package…</p>
</div>
</div>
<div id="sensitivity-analysis." class="section level3">
<h3>Sensitivity Analysis.</h3>
<p>As mentioned earlier, one of the aims of this package is to facilitate seamless transition between analysis of an observational study to perfoming sensitivity analysis. In the section that follow we illustrate how to use functions within this package to accomplish this task.</p>
<div id="pens2-function." class="section level4">
<h4><code>pens2</code> Function.</h4>
<p>This function is meant to facilitate sensitivity analysis for continous outcomes. There is a similar function in <code>rbounds</code> package that implements this method howevever <code>rbounds</code> interacts only with <code>Matching</code> package objects which implements limited methods of matched sampling.</p>
<p>Using <code>lalonde</code> dataset , the code below illustrates how to do sensitivity analysis after implementing an optimal matching algorithm.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">library</span>(Matching);<span class="kw">library</span>(MatchIt)
<span class="kw">data</span>(<span class="st">&quot;lalonde&quot;</span>,<span class="dt">package =</span> <span class="st">&quot;Matching&quot;</span>)

## Sensitivity analysis with a matchit object
m.out =<span class="st"> </span><span class="kw">matchit</span>(treat <span class="op">~</span><span class="st"> </span>age  <span class="op">+</span><span class="st"> </span>educ <span class="op">+</span><span class="st">  </span>black <span class="op">+</span><span class="st"> </span>hisp <span class="op">+</span>married <span class="op">+</span><span class="st"> </span>nodegr <span class="op">+</span><span class="st"> </span>re74  <span class="op">+</span><span class="st"> </span>re75  <span class="op">+</span>
u74 <span class="op">+</span><span class="st"> </span>u75, <span class="dt">family=</span>binomial, <span class="dt">data =</span> lalonde, <span class="dt">method =</span> <span class="st">&quot;optimal&quot;</span>)
<span class="co">#&gt; Warning in optmatch::fullmatch(d, min.controls = ratio, max.controls = ratio, : Without 'data' argument the order of the match is not guaranteed</span>
<span class="co">#&gt;     to be the same as your original data.</span>

## Estimating treatment effect. Ideally, balance assessement should be done prior to estimating treatment effect
mod =<span class="st"> </span><span class="kw">lm</span>(re78<span class="op">~</span>age  <span class="op">+</span><span class="st"> </span>educ <span class="op">+</span><span class="st">  </span>black <span class="op">+</span><span class="st"> </span>hisp <span class="op">+</span>married <span class="op">+</span><span class="st"> </span>nodegr <span class="op">+</span><span class="st"> </span>re74  <span class="op">+</span><span class="st"> </span>re75  <span class="op">+</span>u74 <span class="op">+</span><span class="st"> </span>u75,<span class="dt">data =</span> <span class="kw">match.data</span>(m.out))

## Sensitivity analysis
sens.out =<span class="kw">pens2</span>(<span class="dt">x =</span> m.out, <span class="dt">y=</span><span class="st">&quot;re78&quot;</span>,<span class="dt">Gamma =</span> <span class="dv">2</span>, <span class="dt">GammaInc =</span> <span class="fl">0.1</span>,<span class="dt">est =</span> <span class="fl">629.7</span>)</code></pre></div>
<p>Note that when using <code>MatchIt</code> objects you have to specify the effect estimate or put -1 if there a negative effect estimate and 1 otherwise. After executing this code, you can access a table of sensitivity parameters and their respective Rosenbaum bounds by running the code below:.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">kable</span>(sens.out<span class="op">$</span>bounds)</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Gamma</th>
<th align="right">Lower bound</th>
<th align="right">Upper bound</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1.0</td>
<td align="right">0.0014</td>
<td align="right">0.0014</td>
</tr>
<tr class="even">
<td align="right">1.1</td>
<td align="right">0.0002</td>
<td align="right">0.0069</td>
</tr>
<tr class="odd">
<td align="right">1.2</td>
<td align="right">0.0000</td>
<td align="right">0.0239</td>
</tr>
<tr class="even">
<td align="right">1.3</td>
<td align="right">0.0000</td>
<td align="right">0.0619</td>
</tr>
<tr class="odd">
<td align="right">1.4</td>
<td align="right">0.0000</td>
<td align="right">0.1285</td>
</tr>
<tr class="even">
<td align="right">1.5</td>
<td align="right">0.0000</td>
<td align="right">0.2245</td>
</tr>
<tr class="odd">
<td align="right">1.6</td>
<td align="right">0.0000</td>
<td align="right">0.3425</td>
</tr>
<tr class="even">
<td align="right">1.7</td>
<td align="right">0.0000</td>
<td align="right">0.4696</td>
</tr>
<tr class="odd">
<td align="right">1.8</td>
<td align="right">0.0000</td>
<td align="right">0.5927</td>
</tr>
<tr class="even">
<td align="right">1.9</td>
<td align="right">0.0000</td>
<td align="right">0.7014</td>
</tr>
<tr class="odd">
<td align="right">2.0</td>
<td align="right">0.0000</td>
<td align="right">0.7904</td>
</tr>
</tbody>
</table>
<p>The other advantage of using this package is that it allows you to used objects processed by <code>designmatch</code> package to run sensitivity analysis. This especially important when one wants to implemented more sophisticated matching methods that are not available with either <code>MatchtIt</code> or <code>Matching</code> package such allowing for near fine matching or fine matching. For example to run a sensitivity analysis using the design match object <code>out</code> created earlier on and obtain Rosenbaum sensitivity bounds, the following code would be used:</p>
<pre><code>#&gt;   Building the matching problem... 
#&gt;   GLPK optimizer is open... 
#&gt;   Finding the optimal matches... 
#&gt;   Optimal matches found</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sens2 =<span class="st"> </span><span class="kw">pens2</span>(<span class="dt">x =</span> out, <span class="dt">y=</span><span class="st">&quot;re78&quot;</span>,<span class="dt">Gamma =</span> <span class="dv">2</span>, <span class="dt">GammaInc =</span> <span class="fl">0.1</span>,<span class="dt">est =</span> <span class="dv">234</span>,<span class="dt">treat =</span> <span class="st">&quot;treatment&quot;</span>,<span class="dt">data =</span> lalonde)
<span class="kw">kable</span>(sens2<span class="op">$</span>bounds)</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Gamma</th>
<th align="right">Lower bound</th>
<th align="right">Upper bound</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1.0</td>
<td align="right">0.0798</td>
<td align="right">0.0798</td>
</tr>
<tr class="even">
<td align="right">1.1</td>
<td align="right">0.0326</td>
<td align="right">0.1655</td>
</tr>
<tr class="odd">
<td align="right">1.2</td>
<td align="right">0.0123</td>
<td align="right">0.2818</td>
</tr>
<tr class="even">
<td align="right">1.3</td>
<td align="right">0.0044</td>
<td align="right">0.4147</td>
</tr>
<tr class="odd">
<td align="right">1.4</td>
<td align="right">0.0015</td>
<td align="right">0.5475</td>
</tr>
<tr class="even">
<td align="right">1.5</td>
<td align="right">0.0005</td>
<td align="right">0.6668</td>
</tr>
<tr class="odd">
<td align="right">1.6</td>
<td align="right">0.0002</td>
<td align="right">0.7653</td>
</tr>
<tr class="even">
<td align="right">1.7</td>
<td align="right">0.0000</td>
<td align="right">0.8410</td>
</tr>
<tr class="odd">
<td align="right">1.8</td>
<td align="right">0.0000</td>
<td align="right">0.8959</td>
</tr>
<tr class="even">
<td align="right">1.9</td>
<td align="right">0.0000</td>
<td align="right">0.9340</td>
</tr>
<tr class="odd">
<td align="right">2.0</td>
<td align="right">0.0000</td>
<td align="right">0.9592</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="survsens-function." class="section level3">
<h3><code>Survsens</code> function.</h3>
<p>At the time of writing this vignette there are no sensitivity package with a function that implements sensitivity analysis for time to event outcomes. <code>Survsens</code> performs this analysis and is largerly based on lecture notes provided by Prof.Thomas Love in his travelling course on design of observational studies. We illustrate how to use this function using made up data called <code>toy</code> that is part of this package. To run sensitivity analysis with this function, you first have to perfom matching using a matching package of your choice and assess quality of your match. For example we can first match using <code>MatchIt</code> package with the following code</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;toy&quot;</span>,<span class="dt">package =</span> <span class="st">&quot;SensitivityR5&quot;</span>)
psmodel &lt;-<span class="st"> </span><span class="kw">glm</span>(treated <span class="op">~</span><span class="st"> </span>covA <span class="op">+</span><span class="st"> </span>covB <span class="op">+</span><span class="st"> </span>covC <span class="op">+</span><span class="st"> </span>covD <span class="op">+</span><span class="st"> </span>covE <span class="op">+</span><span class="st"> </span>covF <span class="op">+</span><span class="st"> </span>Asqr <span class="op">+</span><span class="st"> </span>BC <span class="op">+</span><span class="st"> </span>BD, <span class="dt">family=</span><span class="kw">binomial</span>(), <span class="dt">data=</span>toy)
toy<span class="op">$</span>ps &lt;-<span class="st"> </span>psmodel<span class="op">$</span>fitted
toy<span class="op">$</span>linps &lt;-<span class="st"> </span>psmodel<span class="op">$</span>linear.predictors
X &lt;-<span class="st"> </span>toy<span class="op">$</span>linps ## matching on the linear propensity score
Tr &lt;-<span class="st"> </span><span class="kw">as.logical</span>(toy<span class="op">$</span>treated)
Y &lt;-<span class="st"> </span>toy<span class="op">$</span>out3.time
match1 &lt;-<span class="st"> </span><span class="kw">Match</span>(<span class="dt">Y=</span>Y, <span class="dt">Tr=</span>Tr, <span class="dt">X=</span>X, <span class="dt">M =</span> <span class="dv">1</span>, <span class="dt">replace=</span><span class="ot">FALSE</span>, <span class="dt">ties=</span><span class="ot">FALSE</span>)

match.it &lt;-<span class="st"> </span><span class="kw">matchit</span>(treated <span class="op">~</span><span class="st"> </span>covA <span class="op">+</span><span class="st"> </span>covB <span class="op">+</span><span class="st"> </span>covC <span class="op">+</span><span class="st"> </span>covD <span class="op">+</span><span class="st"> </span>covE <span class="op">+</span><span class="st"> </span>covF <span class="op">+</span><span class="st"> </span>Asqr <span class="op">+</span><span class="st"> </span>BC <span class="op">+</span><span class="st"> </span>BD, <span class="dt">data =</span> toy, <span class="dt">method=</span><span class="st">'nearest'</span>, <span class="dt">ratio=</span><span class="dv">1</span>) </code></pre></div>
<p>After assessing the quality of matches and estimating treatment effect, you can then do a sensitivity analysis with <code>SurvSens</code> function using the code similar to the one below to extract Rosenbaum bounds table.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res_Surv =<span class="kw">Survsens</span>(<span class="dt">x=</span> match.it,<span class="dt">data =</span>toy,<span class="dt">exp=</span><span class="st">'treated'</span>,<span class="dt">outcome =</span> <span class="st">'out2'</span>,<span class="dt">failtime =</span> <span class="st">'out3.time'</span>,<span class="dt">Gamma=</span><span class="fl">1.2</span>,<span class="dt">Gammainterval =</span> <span class="fl">0.01</span>,alpha ,<span class="dt">plot_title =</span> <span class="st">'Time To Event Outcome Sensitivity Plot'</span>)

<span class="kw">kable</span>(res_Surv<span class="op">$</span>bounds)</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Gamma</th>
<th align="right">Lower bound</th>
<th align="right">Upper bound</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1.00</td>
<td align="right">0.0168</td>
<td align="right">0.0168</td>
</tr>
<tr class="even">
<td align="right">1.01</td>
<td align="right">0.0150</td>
<td align="right">0.0188</td>
</tr>
<tr class="odd">
<td align="right">1.02</td>
<td align="right">0.0134</td>
<td align="right">0.0210</td>
</tr>
<tr class="even">
<td align="right">1.03</td>
<td align="right">0.0119</td>
<td align="right">0.0234</td>
</tr>
<tr class="odd">
<td align="right">1.04</td>
<td align="right">0.0106</td>
<td align="right">0.0260</td>
</tr>
<tr class="even">
<td align="right">1.05</td>
<td align="right">0.0095</td>
<td align="right">0.0287</td>
</tr>
<tr class="odd">
<td align="right">1.06</td>
<td align="right">0.0084</td>
<td align="right">0.0317</td>
</tr>
<tr class="even">
<td align="right">1.07</td>
<td align="right">0.0075</td>
<td align="right">0.0350</td>
</tr>
<tr class="odd">
<td align="right">1.08</td>
<td align="right">0.0066</td>
<td align="right">0.0384</td>
</tr>
<tr class="even">
<td align="right">1.09</td>
<td align="right">0.0059</td>
<td align="right">0.0421</td>
</tr>
<tr class="odd">
<td align="right">1.10</td>
<td align="right">0.0052</td>
<td align="right">0.0461</td>
</tr>
<tr class="even">
<td align="right">1.11</td>
<td align="right">0.0046</td>
<td align="right">0.0504</td>
</tr>
<tr class="odd">
<td align="right">1.12</td>
<td align="right">0.0041</td>
<td align="right">0.0549</td>
</tr>
<tr class="even">
<td align="right">1.13</td>
<td align="right">0.0037</td>
<td align="right">0.0597</td>
</tr>
<tr class="odd">
<td align="right">1.14</td>
<td align="right">0.0032</td>
<td align="right">0.0647</td>
</tr>
<tr class="even">
<td align="right">1.15</td>
<td align="right">0.0029</td>
<td align="right">0.0701</td>
</tr>
<tr class="odd">
<td align="right">1.16</td>
<td align="right">0.0025</td>
<td align="right">0.0758</td>
</tr>
<tr class="even">
<td align="right">1.17</td>
<td align="right">0.0022</td>
<td align="right">0.0818</td>
</tr>
<tr class="odd">
<td align="right">1.18</td>
<td align="right">0.0020</td>
<td align="right">0.0881</td>
</tr>
<tr class="even">
<td align="right">1.19</td>
<td align="right">0.0018</td>
<td align="right">0.0947</td>
</tr>
<tr class="odd">
<td align="right">1.20</td>
<td align="right">0.0016</td>
<td align="right">0.1017</td>
</tr>
</tbody>
</table>
</div>
<div id="multicontrolsens-function" class="section level3">
<h3><code>MultiControlSens</code> function</h3>
<p>Currently <code>sensitivitymw</code> is the only package that implements sensitivity analysis for in matched sampling designs that allow matched sets rather than simply matched pair. The <code>MultiControlSens</code> complements the <code>sensitivitymw</code> package by processing objects from various matching packages to allow seamless interactions during sensitivity analysis. For example, using the <code>lalonde</code> data , if we match 2 controls to 1 treated using the <code>optimal</code> option in <code>matchit</code> function , we can perform sensititivity analysis using the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">data</span>(<span class="st">&quot;lalonde&quot;</span>,<span class="dt">package =</span><span class="st">&quot;designmatch&quot;</span>)
covs0 =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;education&quot;</span>, <span class="st">&quot;black&quot;</span>, <span class="st">&quot;hispanic&quot;</span>, <span class="st">&quot;married&quot;</span>, <span class="st">&quot;nodegree&quot;</span>, <span class="st">&quot;re74&quot;</span>, <span class="st">&quot;re75&quot;</span>)
m.out &lt;-<span class="st"> </span><span class="kw">matchit</span>(<span class="kw">f.build</span>(<span class="st">&quot;treatment&quot;</span>, covs0), <span class="dt">data =</span> lalonde, <span class="dt">method =</span> <span class="st">&quot;nearest&quot;</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>,<span class="dt">ratio =</span> <span class="dv">2</span>)
res1 =<span class="st"> </span><span class="kw">multiControlSens</span>(<span class="dt">X =</span>m.out,<span class="dt">outcomeName =</span> <span class="st">&quot;re78&quot;</span>,<span class="dt">Gamma =</span> <span class="dv">2</span>,<span class="dt">GammaInc =</span> <span class="fl">0.1</span>,<span class="dt">n_contrl =</span> <span class="dv">2</span>)</code></pre></div>
<p>This function returns Rosenbaum sensitivity bounds and a reformated dataset that can be used for other analyses. The first few rows of the data returned by the function are shown below</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">kable</span>(<span class="kw">head</span>(res1<span class="op">$</span>data,<span class="dv">5</span>))</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Treated</th>
<th align="right">Control 1</th>
<th align="right">Control 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">9930.0460</td>
<td align="right">14421.1300</td>
<td align="right">0.00000</td>
</tr>
<tr class="even">
<td align="right">3595.8940</td>
<td align="right">1525.0140</td>
<td align="right">11136.15000</td>
</tr>
<tr class="odd">
<td align="right">24909.4500</td>
<td align="right">2158.9590</td>
<td align="right">0.00000</td>
</tr>
<tr class="even">
<td align="right">7506.1460</td>
<td align="right">701.9201</td>
<td align="right">33.98771</td>
</tr>
<tr class="odd">
<td align="right">289.7899</td>
<td align="right">14344.2900</td>
<td align="right">94.57450</td>
</tr>
</tbody>
</table>
<p>Rosenbaum bounds can also be exctracted</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">kable</span>(res1<span class="op">$</span>pvalues)</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Gamma</th>
<th align="right">pval Upper Bound</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1.0</td>
<td align="right">0.00</td>
</tr>
<tr class="even">
<td align="right">1.1</td>
<td align="right">0.01</td>
</tr>
<tr class="odd">
<td align="right">1.2</td>
<td align="right">0.02</td>
</tr>
<tr class="even">
<td align="right">1.3</td>
<td align="right">0.06</td>
</tr>
<tr class="odd">
<td align="right">1.4</td>
<td align="right">0.11</td>
</tr>
<tr class="even">
<td align="right">1.5</td>
<td align="right">0.20</td>
</tr>
<tr class="odd">
<td align="right">1.6</td>
<td align="right">0.30</td>
</tr>
<tr class="even">
<td align="right">1.7</td>
<td align="right">0.41</td>
</tr>
<tr class="odd">
<td align="right">1.8</td>
<td align="right">0.53</td>
</tr>
<tr class="even">
<td align="right">1.9</td>
<td align="right">0.64</td>
</tr>
<tr class="odd">
<td align="right">2.0</td>
<td align="right">0.73</td>
</tr>
</tbody>
</table>
<p>From the table above we observe designing an observational study such that 2 control can be matched to a single case then the odds of occurence of an unobserved variable in one exposure group would have to 1.3 the odds of occurence in the other exposure group to nullify any qualitative findings of significance treatment difference between these exposure groups.</p>
</div>
<div id="binarysens2-function." class="section level3">
<h3><code>binarysens2</code> function.</h3>
<p>The <code>rbounds</code> package has implimented method developed by Rosenbaum for binary outcomes sensitivity analyis using the <code>binarysens</code> function. In fact , <code>binarysens2</code> gets most of its coding inspiration from <code>binarysens2</code>. What this function adds on is the ability to do sensitivity analysis using other algorithms that <code>binarysens</code>is currently unable to intaract with. In the sections that follow we illustrate how to use <code>binarysens2</code> with objects from various packages.</p>
<div id="using-matchit-objects." class="section level4">
<h4>Using <code>matchIt</code> objects.</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;GerberGreenImai&quot;</span>,<span class="dt">package =</span> <span class="st">&quot;Matching&quot;</span>)
## Sensitivity analysis with a Match object
m.out =<span class="st"> </span><span class="kw">matchit</span>(PHN.C1 <span class="op">~</span><span class="st"> </span>PERSONS <span class="op">+</span><span class="st"> </span>VOTE96.<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>NEW <span class="op">+</span>MAJORPTY <span class="op">+</span><span class="st"> </span>AGE <span class="op">+</span><span class="st"> </span>WARD , <span class="dt">family=</span>binomial, <span class="dt">data =</span> GerberGreenImai, <span class="dt">method =</span> <span class="st">&quot;nearest&quot;</span>)
mod =<span class="st"> </span><span class="kw">lm</span>(VOTED98 <span class="op">~</span><span class="st"> </span>PHN.C1<span class="op">+</span>PERSONS <span class="op">+</span><span class="st"> </span>VOTE96.<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>NEW <span class="op">+</span>MAJORPTY <span class="op">+</span><span class="st"> </span>AGE <span class="op">+</span><span class="st"> </span>WARD,<span class="dt">data =</span> <span class="kw">match.data</span>(m.out))
<span class="kw">binarysens2</span>(<span class="dt">x=</span>m.out,<span class="dt">y =</span><span class="st">&quot;VOTED98&quot;</span>, <span class="dt">Gamma=</span><span class="dv">2</span>, <span class="dt">GammaInc=</span>.<span class="dv">1</span>)
<span class="co">#&gt; $Gamma</span>
<span class="co">#&gt; [1] 2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $GammaInc</span>
<span class="co">#&gt; [1] 0.1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $pval</span>
<span class="co">#&gt; [1] 0.2601458</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $msg</span>
<span class="co">#&gt; [1] &quot;Rosenbaum Sensitivity Test \n&quot;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $bounds</span>
<span class="co">#&gt;    Gamma Lower bound Upper bound</span>
<span class="co">#&gt; 1    1.0     0.26015     0.26015</span>
<span class="co">#&gt; 2    1.1     0.13818     0.42172</span>
<span class="co">#&gt; 3    1.2     0.06744     0.58257</span>
<span class="co">#&gt; 4    1.3     0.03083     0.71940</span>
<span class="co">#&gt; 5    1.4     0.01342     0.82252</span>
<span class="co">#&gt; 6    1.5     0.00563     0.89328</span>
<span class="co">#&gt; 7    1.6     0.00230     0.93842</span>
<span class="co">#&gt; 8    1.7     0.00093     0.96561</span>
<span class="co">#&gt; 9    1.8     0.00037     0.98129</span>
<span class="co">#&gt; 10   1.9     0.00015     0.99003</span>
<span class="co">#&gt; 11   2.0     0.00006     0.99477</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $note</span>
<span class="co">#&gt; [1] &quot;Note: Gamma is Odds of Differential Assignment To\n Treatment Due to Unobserved Factors \n&quot;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $plot</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The graph above plots the p-value upper bounds corresponding to various <span class="math inline">\(\Gamma\)</span> parameters. The cordinates displayed on the plot refers tot the maximum bias allowable under a specified significance level (<span class="math inline">\(\alpha\)</span>) beyond which the significant findings of true treatment effect can be attributed to unmeasured biases.</p>
</div>
</div>
<div id="pens2-function" class="section level3">
<h3><code>pens2</code> function</h3>
<p>This function is meant to facilitate sensitivity analysis when you have a continous outcome. Again, unlike the current function in <code>rbounds</code>, this package is meant to handle objects from multiple matching algorithms including cardinality matching. In the sections that follow we illustrate how to use it to perform sensitivity analysis with objects from <code>MatchIt</code> and <code>designMatch</code> packages.</p>
<div id="with-matchit-objects" class="section level4">
<h4>with <code>MatchIt</code> objects</h4>
<p>We use the lalonde data in this illustration. Suppose you perfom an optimal match on observed covariates on, then you would execute the following code.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;lalonde&quot;</span>,<span class="dt">package =</span> <span class="st">&quot;Matching&quot;</span>)
m.out =<span class="st"> </span><span class="kw">matchit</span>(treat <span class="op">~</span><span class="st"> </span>age  <span class="op">+</span><span class="st"> </span>educ <span class="op">+</span><span class="st">  </span>black <span class="op">+</span><span class="st"> </span>hisp <span class="op">+</span>married <span class="op">+</span><span class="st"> </span>nodegr <span class="op">+</span><span class="st"> </span>re74  <span class="op">+</span><span class="st"> </span>re75  <span class="op">+</span>
u74 <span class="op">+</span><span class="st"> </span>u75, <span class="dt">family=</span>binomial, <span class="dt">data =</span> lalonde, <span class="dt">method =</span> <span class="st">&quot;nearest&quot;</span>)</code></pre></div>
<p>Ideally, the next step, which we skip here, would be to assess balance of baseline covariates using tools such as the rubins plot and love plots and finally estimate an effect. To perfom sensitivity analysis with <code>pens2</code>, you then need to pass a <code>matchIt</code> object, the estimated treatment effect, name of the outcome variable and the maximum value of the Rosenbaum sensitivity parameter.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mod =<span class="st"> </span><span class="kw">lm</span>(re78<span class="op">~</span>age  <span class="op">+</span><span class="st"> </span>educ <span class="op">+</span><span class="st">  </span>black <span class="op">+</span><span class="st"> </span>hisp <span class="op">+</span>married <span class="op">+</span><span class="st"> </span>nodegr <span class="op">+</span><span class="st"> </span>re74  <span class="op">+</span><span class="st"> </span>re75  <span class="op">+</span>u74 <span class="op">+</span><span class="st"> </span>u75,<span class="dt">data =</span> <span class="kw">match.data</span>(m.out))

sens_object =<span class="st"> </span><span class="kw">pens2</span>(<span class="dt">x =</span> m.out, <span class="dt">y=</span><span class="st">&quot;re78&quot;</span>,<span class="dt">Gamma =</span> <span class="dv">2</span>, <span class="dt">GammaInc =</span> <span class="fl">0.1</span>,<span class="dt">est =</span> <span class="fl">629.7</span>)</code></pre></div>
<p>The <code>pens2</code> function returns a list of items that include a table of bounds for the range of sensitivity parameters passed to the function. To object the table, you can call it from the list as follows</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">kable</span>(sens_object<span class="op">$</span>bounds)</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Gamma</th>
<th align="right">Lower bound</th>
<th align="right">Upper bound</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1.0</td>
<td align="right">1e-03</td>
<td align="right">0.0010</td>
</tr>
<tr class="even">
<td align="right">1.1</td>
<td align="right">1e-04</td>
<td align="right">0.0053</td>
</tr>
<tr class="odd">
<td align="right">1.2</td>
<td align="right">0e+00</td>
<td align="right">0.0190</td>
</tr>
<tr class="even">
<td align="right">1.3</td>
<td align="right">0e+00</td>
<td align="right">0.0509</td>
</tr>
<tr class="odd">
<td align="right">1.4</td>
<td align="right">0e+00</td>
<td align="right">0.1090</td>
</tr>
<tr class="even">
<td align="right">1.5</td>
<td align="right">0e+00</td>
<td align="right">0.1956</td>
</tr>
<tr class="odd">
<td align="right">1.6</td>
<td align="right">0e+00</td>
<td align="right">0.3058</td>
</tr>
<tr class="even">
<td align="right">1.7</td>
<td align="right">0e+00</td>
<td align="right">0.4286</td>
</tr>
<tr class="odd">
<td align="right">1.8</td>
<td align="right">0e+00</td>
<td align="right">0.5513</td>
</tr>
<tr class="even">
<td align="right">1.9</td>
<td align="right">0e+00</td>
<td align="right">0.6632</td>
</tr>
<tr class="odd">
<td align="right">2.0</td>
<td align="right">0e+00</td>
<td align="right">0.7577</td>
</tr>
</tbody>
</table>
</div>
<div id="with-designmatch-objects." class="section level4">
<h4>with <code>designMatch</code> objects.</h4>
<p>If on the other hand you have chosen to do cardinality matching, which optimizes on sample size under constraints of covariate balance, then you would follow the same steps as in section above. First perfom matching with the <code>designMatch</code> package;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">data</span>(<span class="st">&quot;lalonde&quot;</span>,<span class="dt">package =</span> <span class="st">&quot;designmatch&quot;</span>)
<span class="kw">library</span>(designmatch)
<span class="kw">attach</span>(lalonde)
## Treatment indicator
t_ind =<span class="st"> </span>treatment
## Distance matrix
dist_mat =<span class="st"> </span><span class="ot">NULL</span>
## Subset matching weight
subset_weight =<span class="st"> </span><span class="dv">1</span>
## Moment balance: constrain differences in means to be at most .05 standard deviations apart
mom_covs =<span class="st"> </span><span class="kw">cbind</span>(age, education, black, hispanic, married, nodegree, re74, re75)
mom_tols =<span class="st"> </span><span class="kw">round</span>(<span class="kw">absstddif</span>(mom_covs, t_ind, .<span class="dv">05</span>), <span class="dv">2</span>)
mom =<span class="st"> </span><span class="kw">list</span>(<span class="dt">covs =</span> mom_covs, <span class="dt">tols =</span> mom_tols)
## Fine balance
fine_covs =<span class="st"> </span><span class="kw">cbind</span>(black, hispanic, married, nodegree)
fine =<span class="st"> </span><span class="kw">list</span>(<span class="dt">covs =</span> fine_covs)
## Exact matching
exact_covs =<span class="st"> </span><span class="kw">cbind</span>(black)
exact =<span class="st"> </span><span class="kw">list</span>(<span class="dt">covs =</span> exact_covs)
## Solver options
t_max =<span class="st"> </span><span class="dv">60</span><span class="op">*</span><span class="dv">5</span>
solver =<span class="st"> &quot;glpk&quot;</span>
approximate =<span class="st"> </span><span class="dv">1</span>
solver =<span class="st"> </span><span class="kw">list</span>(<span class="dt">name =</span> solver, <span class="dt">t_max =</span> t_max, <span class="dt">approximate =</span> approximate,<span class="dt">round_cplex =</span> <span class="dv">0</span>, <span class="dt">trace =</span> <span class="dv">0</span>)
## Match
out =<span class="st"> </span><span class="kw">bmatch</span>(<span class="dt">t_ind =</span> t_ind, <span class="dt">dist_mat =</span> dist_mat, <span class="dt">subset_weight =</span> subset_weight,<span class="dt">mom =</span> mom, <span class="dt">fine =</span> fine, <span class="dt">exact =</span> exact, <span class="dt">solver =</span> solver)
<span class="co">#&gt;   Building the matching problem... </span>
<span class="co">#&gt;   GLPK optimizer is open... </span>
<span class="co">#&gt;   Finding the optimal matches... </span>
<span class="co">#&gt;   Optimal matches found</span></code></pre></div>
<p>Note in this matching scheme, we have specified that we are fine matching on marital status,race e.t.c. These specifications are all optional. After matchin , you can then call the <code>pens2</code>to perform sensitivity analysis.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
cardMatch =<span class="st"> </span><span class="kw">pens2</span>(<span class="dt">x =</span> out, <span class="dt">y=</span><span class="st">&quot;re78&quot;</span>,<span class="dt">Gamma =</span> <span class="dv">2</span>, <span class="dt">GammaInc =</span> <span class="fl">0.1</span>,<span class="dt">est =</span> <span class="dv">234</span>,<span class="dt">treat =</span> <span class="st">&quot;treatment&quot;</span>,<span class="dt">data =</span> lalonde)

<span class="kw">kable</span>(<span class="kw">head</span>(cardMatch<span class="op">$</span>bounds,<span class="dv">5</span>))</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Gamma</th>
<th align="right">Lower bound</th>
<th align="right">Upper bound</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1.0</td>
<td align="right">0.0798</td>
<td align="right">0.0798</td>
</tr>
<tr class="even">
<td align="right">1.1</td>
<td align="right">0.0326</td>
<td align="right">0.1655</td>
</tr>
<tr class="odd">
<td align="right">1.2</td>
<td align="right">0.0123</td>
<td align="right">0.2818</td>
</tr>
<tr class="even">
<td align="right">1.3</td>
<td align="right">0.0044</td>
<td align="right">0.4147</td>
</tr>
<tr class="odd">
<td align="right">1.4</td>
<td align="right">0.0015</td>
<td align="right">0.5475</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">detach</span>(lalonde)</code></pre></div>
</div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
